# å¾ªç¯æ‰§è¡Œå¼•æ“ v5.2.0

## æ¦‚è¿°

å¾ªç¯æ‰§è¡Œå¼•æ“ (Loop Engine) æ˜¯ RALPH å’Œ ARCHITECT è·¯ç”±çš„æ ¸å¿ƒï¼Œå®ç°"ä»»åŠ¡æœªå®Œæˆè‡ªåŠ¨ç»§ç»­"çš„è¿­ä»£æ‰§è¡Œæ¨¡å¼ã€‚é€šè¿‡ä¸ Stop Hook åä½œï¼Œåœ¨ä»»åŠ¡æœªå®Œæˆæ—¶æ‹¦æˆªé€€å‡ºå¹¶é‡æ–°æ³¨å…¥ä¸Šä¸‹æ–‡ã€‚

**v5.2 æ–°å¢ï¼šå¼‚æ­¥å¹¶è¡Œæ‰§è¡Œ**ï¼Œå…è®¸åŒæ—¶å¯åŠ¨å¤šä¸ªåå°ä»»åŠ¡ï¼Œé€šè¿‡ DAG ä¾èµ–å›¾ç®¡ç†æ‰§è¡Œé¡ºåºï¼Œæ˜¾è‘—æå‡å¤æ‚ä»»åŠ¡æ‰§è¡Œæ•ˆç‡ã€‚

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | ç‰¹æ€§ |
|------|------|
| **v5.2** | å¼‚æ­¥å¹¶è¡Œæ‰§è¡Œã€æ³¢æ¬¡ç®¡ç†ã€DAG ä¾èµ–å›¾ã€è·¨æ¨¡å‹å¹¶è¡Œ |
| v5.1 | CLI ç›´æ¥è°ƒç”¨ã€è‡ªåŠ¨ CLI é™çº§ã€ä¸‰å±‚é˜²å¾¡ç­–ç•¥ |
| v5.0 | åŸå­çŠ¶æ€ä¿å­˜ã€ç»“æ„åŒ–æ—¥å¿—ã€æ™ºèƒ½ MCP è°ƒåº¦ |

## v5.2 æ–°ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å¼‚æ­¥å¹¶è¡Œæ‰§è¡Œ** | ä½¿ç”¨ `run_in_background: true` åŒæ—¶å¯åŠ¨å¤šä¸ªä»»åŠ¡ |
| **DAG ä¾èµ–åˆ†æ** | è‡ªåŠ¨æ„å»ºä»»åŠ¡ä¾èµ–å›¾ï¼Œè¯†åˆ«å¯å¹¶è¡Œä»»åŠ¡ |
| **æ³¢æ¬¡ç®¡ç†** | æŒ‰ä¾èµ–åˆ†ç»„ï¼ŒåŒä¸€æ³¢æ¬¡å†…å¹¶è¡Œæ‰§è¡Œ |
| **è·¨æ¨¡å‹å¹¶è¡Œ** | æ”¯æŒ Codex + Gemini åŒæ—¶æ‰§è¡Œ |
| **TaskOutput è½®è¯¢** | å®šæœŸæ£€æŸ¥åå°ä»»åŠ¡çŠ¶æ€ï¼Œæ”¶é›†ç»“æœ |
| **å¹¶è¡Œæ¢å¤** | ä¸­æ–­åå¯æ¢å¤æ­£åœ¨æ‰§è¡Œçš„å¹¶è¡Œä»»åŠ¡ |

---

## é€‚ç”¨è·¯ç”±

| è·¯ç”± | å¾ªç¯æ¨¡å¼ | è¯´æ˜ |
|------|----------|------|
| DIRECT | å¦ | å•æ¬¡æ‰§è¡Œ |
| PLANNED | å¦ | çº¿æ€§ä¸‰é˜¶æ®µ |
| **RALPH** | **æ˜¯** | å¾ªç¯æ‰§è¡Œç›´åˆ°å®Œæˆ |
| **ARCHITECT** | **æ˜¯** | å¾ªç¯æ‰§è¡Œç›´åˆ°å®Œæˆ |
| UI_FLOW | å¦ | çº¿æ€§ä¸‰é˜¶æ®µ |

---

## çŠ¶æ€æ–‡ä»¶

### æ–‡ä»¶ä½ç½®

```
.claude/ralph-delta.local.md
```

### æ–‡ä»¶æ ¼å¼

```markdown
# Delta Loop State

## Meta
- Task ID: {uuid}
- Route: RALPH
- Started: {timestamp}
- Last Updated: {timestamp}

## Iteration
- Current: {N}
- Max Allowed: {max_iterations}
- Status: IN_PROGRESS | COMPLETED | FAILED | USER_ABORT

## Progress
- Current Phase: {phase_number}
- Completed Phases: [1, 2, ...]
- Current Subtask: {subtask_index} / {total_subtasks}

## Pending Work
{remaining_tasks_description}

## Completed Work
{completed_work_summary}

## Promise
<!-- ä»…å½“ä»»åŠ¡å®Œå…¨å®Œæˆæ—¶è®¾ç½® -->
<promise>TASK_COMPLETE</promise>
```

### çŠ¶æ€å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `Task ID` | UUID | ä»»åŠ¡å”¯ä¸€æ ‡è¯† |
| `Route` | String | ä½¿ç”¨çš„è·¯ç”± (RALPH/ARCHITECT) |
| `Current` | Integer | å½“å‰è¿­ä»£æ¬¡æ•° |
| `Max Allowed` | Integer | æœ€å¤§è¿­ä»£æ¬¡æ•° (é»˜è®¤ 20) |
| `Status` | Enum | å½“å‰çŠ¶æ€ |
| `Pending Work` | Markdown | å‰©ä½™å·¥ä½œæè¿° |
| `Promise` | Tag | å®Œæˆæ‰¿è¯ºæ ‡è®° |

---

## è¿­ä»£æµç¨‹

### 1. åˆå§‹åŒ–

```
/do "complex task" â†’ RALPH è·¯ç”±
    â†“
åˆ›å»ºçŠ¶æ€æ–‡ä»¶ .claude/ralph-delta.local.md
    â†“
è®¾ç½® Iteration.Current = 1
è®¾ç½® Status = IN_PROGRESS
    â†“
å¼€å§‹ Phase 1
```

### 2. æ­£å¸¸è¿­ä»£

```
å®Œæˆä¸€ä¸ªé˜¶æ®µ/å­ä»»åŠ¡
    â†“
æ›´æ–°çŠ¶æ€æ–‡ä»¶
    - å¢åŠ  Completed Phases
    - æ›´æ–° Pending Work
    - æ›´æ–° Last Updated
    â†“
æ£€æŸ¥æ˜¯å¦å®Œæˆæ‰€æœ‰å·¥ä½œï¼Ÿ
    â”œâ”€â”€ æ˜¯ â†’ è®¾ç½® <promise>TASK_COMPLETE</promise>
    â””â”€â”€ å¦ â†’ ç»§ç»­ä¸‹ä¸€é˜¶æ®µ/å­ä»»åŠ¡
```

### 3. ä¼šè¯ç»“æŸæ£€æµ‹

å½“ Claude å³å°†ç»“æŸå›å¤æ—¶ï¼š

```
æ£€æŸ¥çŠ¶æ€æ–‡ä»¶
    â†“
æ˜¯å¦å­˜åœ¨ <promise>TASK_COMPLETE</promise>ï¼Ÿ
    â”œâ”€â”€ æ˜¯ â†’ æ­£å¸¸ç»“æŸï¼Œå½’æ¡£çŠ¶æ€æ–‡ä»¶
    â””â”€â”€ å¦ â†’ Stop Hook æ‹¦æˆª
              â†“
          Iteration.Current < Max Allowedï¼Ÿ
              â”œâ”€â”€ æ˜¯ â†’ é‡æ–°æ³¨å…¥ Prompt
              â””â”€â”€ å¦ â†’ è¾“å‡ºè¿­ä»£ä¸Šé™è­¦å‘Š
```

---

## Stop Hook é›†æˆ

### è§¦å‘æ¡ä»¶

Stop Hook åœ¨ä»¥ä¸‹æ¡ä»¶ä¸‹è§¦å‘ï¼š

1. çŠ¶æ€æ–‡ä»¶å­˜åœ¨ (`.claude/ralph-delta.local.md`)
2. Status = `IN_PROGRESS`
3. æ—  `<promise>TASK_COMPLETE</promise>` æ ‡è®°
4. Iteration.Current < Max Allowed

### é‡æ³¨å…¥ Prompt æ¨¡æ¿

```markdown
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ è¿­ä»£ç»§ç»­ | ç¬¬ {N}/{MAX} æ¬¡
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ä¸Šæ¬¡è¿›åº¦
{completed_work_summary}

## å¾…å®Œæˆå·¥ä½œ
{pending_work}

## å½“å‰ä½ç½®
- è·¯ç”±: {route}
- é˜¶æ®µ: Phase {current_phase}
- å­ä»»åŠ¡: {current_subtask}

## æŒ‡ä»¤
ç»§ç»­æ‰§è¡Œæœªå®Œæˆçš„å·¥ä½œã€‚å®Œæˆæ‰€æœ‰å·¥ä½œåï¼Œå¿…é¡»åœ¨çŠ¶æ€æ–‡ä»¶ä¸­è®¾ç½®ï¼š
<promise>TASK_COMPLETE</promise>

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## å®Œæˆæ¡ä»¶

### å®Œæˆæ£€æµ‹

ä»»åŠ¡è¢«è§†ä¸ºå®Œæˆå½“ä¸”ä»…å½“ï¼š

1. **æ‰€æœ‰é˜¶æ®µå®Œæˆ**ï¼šCompleted Phases åŒ…å«æ‰€æœ‰å¿…è¦é˜¶æ®µ
2. **æ‰€æœ‰å­ä»»åŠ¡å®Œæˆ**ï¼šå¯¹äº RALPH/ARCHITECTï¼Œæ‰€æœ‰å­ä»»åŠ¡å·²å®Œæˆ
3. **å®¡æŸ¥é€šè¿‡**ï¼šæœ€åçš„å®¡æŸ¥é˜¶æ®µå·²å®Œæˆ

### è®¾ç½®å®Œæˆæ ‡è®°

```markdown
## Promise
<promise>TASK_COMPLETE</promise>

## Completion Summary
- Total Iterations: {count}
- Total Duration: {time}
- Files Modified: {count}
- Review Score: {score}/100
```

### å®Œæˆåå¤„ç†

```
æ£€æµ‹åˆ° <promise>TASK_COMPLETE</promise>
    â†“
å½’æ¡£çŠ¶æ€æ–‡ä»¶
    - ç§»åŠ¨åˆ° .skillpack/history/{timestamp}/
    - ç”Ÿæˆå®ŒæˆæŠ¥å‘Š
    â†“
æ¸…ç†å·¥ä½œç›®å½•
    â†“
è¾“å‡ºæœ€ç»ˆæ‘˜è¦
```

---

## è¿­ä»£é™åˆ¶

### é»˜è®¤é…ç½®

```yaml
max_iterations: 20           # æœ€å¤§è¿­ä»£æ¬¡æ•°
warning_threshold: 15        # å¼€å§‹è­¦å‘Šçš„è¿­ä»£æ¬¡æ•°
auto_checkpoint_interval: 3  # è‡ªåŠ¨ä¿å­˜æ£€æŸ¥ç‚¹çš„é—´éš”
```

### å¯é…ç½®é¡¹ (.skillpackrc)

```json
{
  "loop": {
    "max_iterations": 20,
    "warning_threshold": 15,
    "auto_checkpoint_interval": 3,
    "timeout_per_iteration_minutes": 30
  }
}
```

### è¾¾åˆ°ä¸Šé™å¤„ç†

```
Iteration.Current >= Max Allowed
    â†“
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ âš ï¸ è¾¾åˆ°è¿­ä»£ä¸Šé™                                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ å½“å‰è¿­ä»£: {current}/{max}                                  â•‘
â•‘ å·²å®Œæˆ: {completed_summary}                                â•‘
â•‘ æœªå®Œæˆ: {pending_summary}                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ğŸ“‹ é€‰é¡¹:                                                   â•‘
â•‘   [1] â• å¢åŠ è¿­ä»£ä¸Šé™ (+10)                                â•‘
â•‘   [2] ğŸ”€ ç®€åŒ–ä»»åŠ¡èŒƒå›´                                      â•‘
â•‘   [3] ğŸ“ ä¿å­˜è¿›åº¦å¹¶é€€å‡º                                    â•‘
â•‘   [4] â›” æ”¾å¼ƒæ­¤ä»»åŠ¡                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
è¯·é€‰æ‹© (1-4):
```

---

## çŠ¶æ€æ›´æ–°è§„èŒƒ

### æ¯é˜¶æ®µç»“æŸæ—¶

```python
def update_state_after_phase(phase_num: int, result: dict):
    """é˜¶æ®µå®Œæˆåæ›´æ–°çŠ¶æ€"""
    state = read_state_file()

    # æ›´æ–°å·²å®Œæˆé˜¶æ®µ
    state.completed_phases.append(phase_num)

    # æ›´æ–°å¾…å®Œæˆå·¥ä½œ
    state.pending_work = calculate_remaining_work()

    # æ›´æ–°å·²å®Œæˆå·¥ä½œæ‘˜è¦
    state.completed_work += format_phase_summary(phase_num, result)

    # æ›´æ–°æ—¶é—´æˆ³
    state.last_updated = now()

    # æ£€æŸ¥æ˜¯å¦å…¨éƒ¨å®Œæˆ
    if all_phases_completed(state):
        state.promise = "TASK_COMPLETE"

    write_state_file(state)
```

### æ¯å­ä»»åŠ¡ç»“æŸæ—¶

```python
def update_state_after_subtask(subtask_index: int, result: dict):
    """å­ä»»åŠ¡å®Œæˆåæ›´æ–°çŠ¶æ€"""
    state = read_state_file()

    # æ›´æ–°å­ä»»åŠ¡è¿›åº¦
    state.current_subtask = subtask_index + 1

    # æ›´æ–°å·²å®Œæˆå·¥ä½œ
    state.completed_work += format_subtask_summary(subtask_index, result)

    # ä¿å­˜æ£€æŸ¥ç‚¹ (æ¯ N ä¸ªå­ä»»åŠ¡)
    if subtask_index % state.auto_checkpoint_interval == 0:
        save_checkpoint(state)

    write_state_file(state)
```

---

## æ¢å¤æœºåˆ¶

### ä»çŠ¶æ€æ–‡ä»¶æ¢å¤

```bash
/do --resume
```

```
æ£€æµ‹åˆ°æœªå®ŒæˆçŠ¶æ€æ–‡ä»¶
    â†“
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ”„ å‘ç°æœªå®Œæˆä»»åŠ¡                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ä»»åŠ¡: {task_description}                                   â•‘
â•‘ è·¯ç”±: {route}                                              â•‘
â•‘ è¿›åº¦: Phase {current}/{total}, è¿­ä»£ {iteration}           â•‘
â•‘ ä¸­æ–­æ—¶é—´: {last_updated}                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ğŸ“‹ é€‰é¡¹:                                                   â•‘
â•‘   [1] â–¶ï¸ ç»§ç»­æ‰§è¡Œ                                          â•‘
â•‘   [2] ğŸ”„ ä»å¤´å¼€å§‹                                          â•‘
â•‘   [3] ğŸ“ æŸ¥çœ‹è¯¦ç»†è¿›åº¦                                      â•‘
â•‘   [4] âŒ æ”¾å¼ƒæ­¤ä»»åŠ¡                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
è¯·é€‰æ‹© (1-4):
```

---

## ç¤ºä¾‹ï¼šRALPH å¾ªç¯

### åˆå§‹çŠ¶æ€

```markdown
# Delta Loop State

## Meta
- Task ID: abc123
- Route: RALPH
- Started: 2026-01-18 10:00:00
- Last Updated: 2026-01-18 10:00:00

## Iteration
- Current: 1
- Max Allowed: 20
- Status: IN_PROGRESS

## Progress
- Current Phase: 1
- Completed Phases: []
- Current Subtask: 0 / 5

## Pending Work
1. Phase 1: æ·±åº¦åˆ†æ
2. Phase 2: è§„åˆ’
3. Phase 3: æ‰§è¡Œ 5 ä¸ªå­ä»»åŠ¡
4. Phase 4: ç»¼åˆå®¡æŸ¥

## Completed Work
(none)

## Promise
<!-- æœªå®Œæˆ -->
```

### è¿­ä»£ 3 åçŠ¶æ€

```markdown
# Delta Loop State

## Meta
- Task ID: abc123
- Route: RALPH
- Started: 2026-01-18 10:00:00
- Last Updated: 2026-01-18 10:35:00

## Iteration
- Current: 3
- Max Allowed: 20
- Status: IN_PROGRESS

## Progress
- Current Phase: 3
- Completed Phases: [1, 2]
- Current Subtask: 2 / 5

## Pending Work
1. Phase 3: å®Œæˆå‰©ä½™ 3 ä¸ªå­ä»»åŠ¡
2. Phase 4: ç»¼åˆå®¡æŸ¥

## Completed Work
### Phase 1: æ·±åº¦åˆ†æ
- è¯†åˆ« 5 ä¸ªæ ¸å¿ƒå­ä»»åŠ¡
- ç¡®å®šä¾èµ–å…³ç³»

### Phase 2: è§„åˆ’
- åˆ¶å®šæ‰§è¡Œè®¡åˆ’
- åˆ†é…èµ„æº

### Phase 3: å­ä»»åŠ¡è¿›åº¦
- [x] å­ä»»åŠ¡ 1: ç”¨æˆ·æ¨¡å‹
- [x] å­ä»»åŠ¡ 2: è®¤è¯æœåŠ¡
- [ ] å­ä»»åŠ¡ 3: æƒé™æ£€æŸ¥
- [ ] å­ä»»åŠ¡ 4: ä¼šè¯ç®¡ç†
- [ ] å­ä»»åŠ¡ 5: å®‰å…¨å®¡è®¡

## Promise
<!-- æœªå®Œæˆ -->
```

### å®ŒæˆçŠ¶æ€

```markdown
# Delta Loop State

## Meta
- Task ID: abc123
- Route: RALPH
- Started: 2026-01-18 10:00:00
- Last Updated: 2026-01-18 11:20:00

## Iteration
- Current: 5
- Max Allowed: 20
- Status: COMPLETED

## Progress
- Current Phase: 4
- Completed Phases: [1, 2, 3, 4]
- Current Subtask: 5 / 5

## Pending Work
(none)

## Completed Work
### Phase 1-4 å®Œæ•´æ‘˜è¦...

## Promise
<promise>TASK_COMPLETE</promise>

## Completion Summary
- Total Iterations: 5
- Total Duration: 1h 20m
- Files Modified: 12
- Review Score: 92/100
```

---

## ä¸æ£€æŸ¥ç‚¹ç³»ç»Ÿé›†æˆ (v5.0 å¢å¼º)

å¾ªç¯å¼•æ“ä¸ `checkpoint.md` v3.0 æ¨¡å—åä½œï¼š

1. **åŸå­ä¿å­˜**ï¼šä½¿ç”¨ write-rename æ¨¡å¼ï¼Œé˜²æ­¢æ•°æ®æŸå
2. **SHA-256 æ ¡éªŒ**ï¼šæ¯æ¬¡ä¿å­˜è‡ªåŠ¨è®¡ç®—æ ¡éªŒå’Œ
3. **å¤šç‰ˆæœ¬å¤‡ä»½**ï¼šä¿ç•™ 3 ä¸ªçŠ¶æ€æ–‡ä»¶å¤‡ä»½
4. **æ¢å¤ç‚¹**ï¼šçŠ¶æ€æ–‡ä»¶ä½œä¸ºæ¢å¤çš„ä¸»è¦æ•°æ®æº
5. **å†å²è®°å½•**ï¼šå®Œæˆåå½’æ¡£åˆ° `.skillpack/history/`

```
.skillpack/
â”œâ”€â”€ current/
â”‚   â”œâ”€â”€ checkpoint.json           # æ£€æŸ¥ç‚¹æ•°æ®
â”‚   â”œâ”€â”€ checkpoint.json.sha256    # æ ¡éªŒå’Œæ–‡ä»¶
â”‚   â”œâ”€â”€ checkpoint.json.backup.*  # å¤šç‰ˆæœ¬å¤‡ä»½
â”‚   â”œâ”€â”€ execution.log.jsonl       # ç»“æ„åŒ–æ—¥å¿—
â”‚   â””â”€â”€ ...
â””â”€â”€ history/
    â””â”€â”€ 2026-01-18_abc123/
        â”œâ”€â”€ ralph-delta.state.md  # å½’æ¡£çš„çŠ¶æ€æ–‡ä»¶
        â”œâ”€â”€ checkpoint.json
        â””â”€â”€ ...

.claude/
â””â”€â”€ ralph-delta.local.md          # æ´»è·ƒçš„çŠ¶æ€æ–‡ä»¶
```

---

## æ—¥å¿—è®°å½• (v5.0 æ–°å¢)

è¿­ä»£ç›¸å…³äº‹ä»¶è‡ªåŠ¨è®°å½•åˆ° `execution.log.jsonl`ï¼š

```json
{"ts":"...","level":"INFO","event":"iteration_start","iteration":1,"phase":1}
{"ts":"...","level":"INFO","event":"iteration_complete","iteration":1,"subtasks_done":2}
{"ts":"...","level":"WARN","event":"iteration_retry","iteration":2,"reason":"mcp_timeout"}
```

### è¿­ä»£äº‹ä»¶ç±»å‹

| äº‹ä»¶ | è¯´æ˜ |
|------|------|
| `iteration_start` | æ–°è¿­ä»£å¼€å§‹ |
| `iteration_complete` | è¿­ä»£å®Œæˆ |
| `iteration_retry` | è¿­ä»£ä¸­é‡è¯• |
| `stop_hook_trigger` | Stop Hook è§¦å‘ |
| `prompt_reinjected` | Prompt é‡æ–°æ³¨å…¥ |
| `task_complete` | ä»»åŠ¡æœ€ç»ˆå®Œæˆ |
| `wave_start` | å¹¶è¡Œæ³¢æ¬¡å¼€å§‹ (v5.2) |
| `wave_complete` | å¹¶è¡Œæ³¢æ¬¡å®Œæˆ (v5.2) |
| `parallel_task_start` | å¹¶è¡Œä»»åŠ¡å¯åŠ¨ (v5.2) |
| `parallel_task_complete` | å¹¶è¡Œä»»åŠ¡å®Œæˆ (v5.2) |

---

## å¹¶è¡Œæ‰§è¡Œæ¨¡å¼ (v5.2 æ–°å¢)

### æ¦‚è¿°

å½“ `parallel.enabled = true` æ—¶ï¼Œå¾ªç¯å¼•æ“åˆ‡æ¢åˆ°å¹¶è¡Œæ‰§è¡Œæ¨¡å¼ï¼Œå…è®¸åŒæ—¶å¯åŠ¨å¤šä¸ªåå°ä»»åŠ¡ã€‚

### å¹¶è¡Œæ‰§è¡Œæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Parallel Orchestrator              â”‚
â”‚        (å¹¶è¡Œä»»åŠ¡ç¼–æ’å™¨ - Claude)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
              â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
              â–¼     â–¼     â–¼
           Worker Worker Worker
           (Codex)(Codex)(Gemini)
              â”‚     â”‚     â”‚
              â”‚  run_in_background: true
              â”‚     â”‚     â”‚
              â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”˜
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Result Collector                   â”‚
â”‚     (TaskOutput è½®è¯¢æ”¶é›†å™¨ - Claude)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¹¶è¡Œæ‰§è¡Œæµç¨‹

```
1. æ„å»ºä»»åŠ¡ä¾èµ–å›¾ (DAG)
   â”‚   åˆ†æå­ä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»
   â–¼
2. è®¡ç®—æ‰§è¡Œæ³¢æ¬¡
   â”‚   å°†æ— ä¾èµ–ä»»åŠ¡åˆ†ç»„åˆ°åŒä¸€æ³¢æ¬¡
   â–¼
3. å¯åŠ¨å½“å‰æ³¢æ¬¡çš„æ‰€æœ‰ä»»åŠ¡
   â”‚   ä½¿ç”¨ Task å·¥å…· + run_in_background: true
   â”‚   è®°å½• task_id åˆ°æ£€æŸ¥ç‚¹
   â–¼
4. è½®è¯¢ç­‰å¾…ä»»åŠ¡å®Œæˆ
   â”‚   TaskOutput å®šæœŸæ£€æŸ¥ (poll_interval_seconds)
   â”‚   æ›´æ–°æ£€æŸ¥ç‚¹ä¸­çš„ä»»åŠ¡çŠ¶æ€
   â–¼
5. å¤„ç†å®Œæˆ/å¤±è´¥çš„ä»»åŠ¡
   â”‚   æˆåŠŸ â†’ ç§»å…¥ completed
   â”‚   å¤±è´¥ â†’ æ ¹æ®ç­–ç•¥é‡è¯•æˆ–è·³è¿‡
   â–¼
6. æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„å¯æ‰§è¡Œä»»åŠ¡
   â”‚   ä¾èµ–å·²æ»¡è¶³ â†’ åŠ å…¥ä¸‹ä¸€æ³¢æ¬¡
   â–¼
7. å›åˆ° Step 3 ç›´åˆ°å…¨éƒ¨å®Œæˆ
```

### DAG ä¾èµ–å›¾åˆ†æ

#### è‡ªåŠ¨ä¾èµ–æ£€æµ‹

å¾ªç¯å¼•æ“è‡ªåŠ¨åˆ†æå­ä»»åŠ¡æè¿°ï¼Œè¯†åˆ«ä¾èµ–å…³ç³»ï¼š

```python
def analyze_dependencies(subtasks: list) -> dict:
    """åˆ†æå­ä»»åŠ¡ä¾èµ–å…³ç³»"""
    dag = {"nodes": [], "edges": []}

    for task in subtasks:
        # æ£€æµ‹æ˜¾å¼ä¾èµ–å£°æ˜
        # ä¾‹å¦‚: "å®ç°ç™»å½•æ¥å£ï¼ˆä¾èµ–ç”¨æˆ·æ¨¡å‹ï¼‰"
        deps = extract_explicit_deps(task.description)

        # æ£€æµ‹éšå¼ä¾èµ–
        # ä¾‹å¦‚: "æ·»åŠ æµ‹è¯•" é€šå¸¸ä¾èµ–å®ç°å®Œæˆ
        deps += infer_implicit_deps(task, subtasks)

        dag["nodes"].append({
            "id": task.id,
            "dependencies": deps
        })

    return dag
```

#### ä¾èµ–æ£€æµ‹è§„åˆ™

| è§„åˆ™ | ç¤ºä¾‹ | ä¾èµ–å…³ç³» |
|------|------|----------|
| æ˜¾å¼å£°æ˜ | "å®ç° Xï¼ˆä¾èµ– Yï¼‰" | X â†’ Y |
| æ•°æ®ä¾èµ– | "ä½¿ç”¨ User æ¨¡å‹" â†’ "åˆ›å»º User æ¨¡å‹" | åè€…ä¾èµ–å‰è€… |
| æµ‹è¯•ä¾èµ– | "æ·»åŠ æµ‹è¯•" â†’ "å®ç°åŠŸèƒ½" | æµ‹è¯•ä¾èµ–å®ç° |
| æ–‡æ¡£ä¾èµ– | "æ›´æ–°æ–‡æ¡£" â†’ "å®Œæˆå¼€å‘" | æ–‡æ¡£ä¾èµ–å¼€å‘ |

#### æ‰‹åŠ¨ä¾èµ–å£°æ˜

åœ¨ä»»åŠ¡æè¿°ä¸­ä½¿ç”¨ç‰¹æ®Šè¯­æ³•ï¼š

```markdown
## å­ä»»åŠ¡åˆ—è¡¨
1. [subtask_1] åˆ›å»ºç”¨æˆ·æ¨¡å‹
2. [subtask_2] åˆ›å»ºè®¤è¯æœåŠ¡
3. [subtask_3] å®ç°ç™»å½•æ¥å£ @depends(subtask_1, subtask_2)
4. [subtask_4] æ·»åŠ å•å…ƒæµ‹è¯• @depends(subtask_3)
```

### æ³¢æ¬¡è®¡ç®—

```python
def calculate_waves(dag: dict) -> list:
    """å°† DAG è½¬æ¢ä¸ºæ‰§è¡Œæ³¢æ¬¡"""
    waves = []
    completed = set()
    remaining = set(node["id"] for node in dag["nodes"])

    while remaining:
        # æ‰¾å‡ºæ‰€æœ‰ä¾èµ–å·²æ»¡è¶³çš„ä»»åŠ¡
        wave = []
        for node in dag["nodes"]:
            if node["id"] in remaining:
                deps = set(node["dependencies"])
                if deps.issubset(completed):
                    wave.append(node["id"])

        if not wave:
            raise CyclicDependencyError("æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–")

        waves.append(wave)
        completed.update(wave)
        remaining -= set(wave)

    return waves
```

### å¹¶è¡Œä»»åŠ¡å¯åŠ¨

#### å•æ³¢æ¬¡å¯åŠ¨æ‰€æœ‰ä»»åŠ¡

```markdown
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ Wave 2/3 å¼€å§‹ | å¹¶è¡Œå¯åŠ¨ 3 ä¸ªä»»åŠ¡
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ä»»åŠ¡åˆ—è¡¨:
â”œâ”€â”€ [subtask_3] å®ç°ç™»å½•æ¥å£ â†’ Codex
â”œâ”€â”€ [subtask_4] å®ç°æ³¨å†Œæ¥å£ â†’ Codex
â””â”€â”€ [subtask_5] è®¾è®¡è¡¨å•ç»„ä»¶ â†’ Gemini
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

#### å¹¶è¡Œ Task è°ƒç”¨ç¤ºä¾‹

```python
# åœ¨å•æ¡æ¶ˆæ¯ä¸­å¯åŠ¨å¤šä¸ªåå°ä»»åŠ¡
tasks = [
    Task(
        description="å®ç°ç™»å½•æ¥å£",
        prompt=codex_prompt_1,
        subagent_type="Bash",  # ä½¿ç”¨ codex CLI
        run_in_background=True
    ),
    Task(
        description="å®ç°æ³¨å†Œæ¥å£",
        prompt=codex_prompt_2,
        subagent_type="Bash",
        run_in_background=True
    ),
    Task(
        description="è®¾è®¡è¡¨å•ç»„ä»¶",
        prompt=gemini_prompt,
        subagent_type="Bash",  # ä½¿ç”¨ gemini CLI
        run_in_background=True
    )
]
```

### TaskOutput è½®è¯¢æ”¶é›†

```python
async def poll_parallel_tasks(task_ids: list, interval: int = 5):
    """è½®è¯¢å¹¶è¡Œä»»åŠ¡çŠ¶æ€"""
    pending = set(task_ids)
    results = {}

    while pending:
        for task_id in list(pending):
            output = TaskOutput(
                task_id=task_id,
                block=False,  # éé˜»å¡æ£€æŸ¥
                timeout=1000
            )

            if output.status == "completed":
                results[task_id] = output.result
                pending.remove(task_id)
                # æ›´æ–°æ£€æŸ¥ç‚¹
                update_checkpoint(task_id, "completed")

            elif output.status == "failed":
                results[task_id] = {"error": output.error}
                pending.remove(task_id)
                update_checkpoint(task_id, "failed")

        if pending:
            # ç­‰å¾…è½®è¯¢é—´éš”
            await sleep(interval)
            # è¾“å‡ºè¿›åº¦
            print(f"â³ ç­‰å¾…ä¸­: {len(pending)}/{len(task_ids)} ä»»åŠ¡")

    return results
```

### è½®è¯¢çŠ¶æ€æç¤º

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â³ Wave 2 æ‰§è¡Œä¸­ | 3 ä¸ªä»»åŠ¡å¹¶è¡Œ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[â—â—â—â—‹â—‹] subtask_3 - å®ç°ç™»å½•æ¥å£ (Codex) - è¿è¡Œä¸­ 45s
[â—â—â—â—â—] subtask_4 - å®ç°æ³¨å†Œæ¥å£ (Codex) - âœ… å®Œæˆ
[â—â—â—‹â—‹â—‹] subtask_5 - è®¾è®¡è¡¨å•ç»„ä»¶ (Gemini) - è¿è¡Œä¸­ 30s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä¸‹æ¬¡è½®è¯¢: 5 ç§’å
å·²ç”¨æ—¶é—´: 1m 15s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### å¹¶è¡Œæ¨¡å¼çŠ¶æ€æ–‡ä»¶

å½“å¹¶è¡Œæ‰§è¡Œæ—¶ï¼ŒçŠ¶æ€æ–‡ä»¶å¢åŠ å¹¶è¡Œç›¸å…³å­—æ®µï¼š

```markdown
# Delta Loop State

## Meta
- Task ID: abc123
- Route: RALPH
- Execution Mode: PARALLEL
- Started: 2026-01-19 10:00:00
- Last Updated: 2026-01-19 10:35:00

## Iteration
- Current: 3
- Max Allowed: 20
- Status: IN_PROGRESS

## Parallel Execution
- Enabled: true
- Current Wave: 2 / 3
- Max Concurrent: 3
- Active Tasks: 2

## Active Background Tasks
| Task ID | Subtask | Model | Started | Status |
|---------|---------|-------|---------|--------|
| bg-001 | subtask_3 | codex | 10:30:00 | running |
| bg-002 | subtask_5 | gemini | 10:30:05 | running |

## Wave Progress
- Wave 1: âœ… [subtask_1, subtask_2] - å®Œæˆ
- Wave 2: â³ [subtask_3, subtask_4, subtask_5] - æ‰§è¡Œä¸­ (1/3 å®Œæˆ)
- Wave 3: â¸ï¸ [subtask_6] - ç­‰å¾…

## Completed Work
### Wave 1
- [x] subtask_1: åˆ›å»ºç”¨æˆ·æ¨¡å‹ (Codex, 45s)
- [x] subtask_2: åˆ›å»ºè®¤è¯æœåŠ¡ (Codex, 60s)

### Wave 2 (è¿›è¡Œä¸­)
- [x] subtask_4: å®ç°æ³¨å†Œæ¥å£ (Codex, 50s)
- [ ] subtask_3: å®ç°ç™»å½•æ¥å£ (è¿è¡Œä¸­)
- [ ] subtask_5: è®¾è®¡è¡¨å•ç»„ä»¶ (è¿è¡Œä¸­)

## Promise
<!-- æœªå®Œæˆ -->
```

### æ³¢æ¬¡å®Œæˆç­–ç•¥

| ç­–ç•¥ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `wait_all` | ç­‰å¾…å½“å‰æ³¢æ¬¡æ‰€æœ‰ä»»åŠ¡å®Œæˆåå¼€å§‹ä¸‹ä¸€æ³¢ | é»˜è®¤ç­–ç•¥ï¼Œç¡®ä¿ä¾èµ–æ»¡è¶³ |
| `continue_on_success` | ä»»åŠ¡å®Œæˆå³æ£€æŸ¥æ˜¯å¦å¯å¯åŠ¨åç»­ä»»åŠ¡ | ä¼˜åŒ–æ‰§è¡Œæ—¶é—´ï¼Œä»»åŠ¡é—´ä¾èµ–è¾ƒå°‘æ—¶ |

### å¹¶è¡Œæ‰§è¡Œå¤±è´¥å¤„ç†

```
å¹¶è¡Œä»»åŠ¡å¤±è´¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: æ£€æŸ¥å¤±è´¥ç­–ç•¥                         â”‚
â”‚   fallback_to_serial_on_failure = true?    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€ true: é™çº§åˆ°ä¸²è¡Œæ¨¡å¼
    â”‚       â”‚
    â”‚       â–¼
    â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â”‚   âš ï¸ å¹¶è¡Œæ‰§è¡Œå¤±è´¥ï¼Œé™çº§åˆ°ä¸²è¡Œæ¨¡å¼
    â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â”‚   å¤±è´¥ä»»åŠ¡: subtask_3
    â”‚   é”™è¯¯: {error_message}
    â”‚   åç»­ä»»åŠ¡å°†ä¸²è¡Œæ‰§è¡Œ
    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚
    â””â”€â”€ false: è¯¢é—®ç”¨æˆ·
            â”‚
            â–¼
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘ âš ï¸ å¹¶è¡Œä»»åŠ¡å¤±è´¥                        â•‘
        â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
        â•‘ å¤±è´¥ä»»åŠ¡: subtask_3                    â•‘
        â•‘ é”™è¯¯: {error_message}                  â•‘
        â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
        â•‘ [1] ğŸ”„ é‡è¯•å¤±è´¥ä»»åŠ¡                    â•‘
        â•‘ [2] â­ï¸ è·³è¿‡å¹¶ç»§ç»­                      â•‘
        â•‘ [3] ğŸ“‰ é™çº§åˆ°ä¸²è¡Œæ¨¡å¼                  â•‘
        â•‘ [4] â›” ä¸­æ­¢æ‰§è¡Œ                        â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### å¹¶è¡Œä¸ä¸²è¡Œæ··åˆ

æŸäº›é˜¶æ®µå¯èƒ½æ›´é€‚åˆä¸²è¡Œæ‰§è¡Œï¼š

```yaml
phase_execution_mode:
  phase_1_analysis: serial      # åˆ†æéœ€è¦å®Œæ•´ä¸Šä¸‹æ–‡
  phase_2_planning: serial      # è§„åˆ’éœ€è¦é¡ºåºå†³ç­–
  phase_3_execution: parallel   # å­ä»»åŠ¡å¯å¹¶è¡Œ
  phase_4_review: serial        # å®¡æŸ¥éœ€è¦å…¨å±€è§†è§’
```

### è·¨æ¨¡å‹å¹¶è¡Œ

å½“ `allow_cross_model_parallel = true` æ—¶ï¼ŒCodex å’Œ Gemini å¯åŒæ—¶æ‰§è¡Œï¼š

```
Wave 2 (è·¨æ¨¡å‹å¹¶è¡Œ):
â”œâ”€â”€ [Codex]  subtask_3: å®ç° API æ¥å£
â”œâ”€â”€ [Codex]  subtask_4: æ·»åŠ æ•°æ®éªŒè¯
â””â”€â”€ [Gemini] subtask_5: è®¾è®¡ UI ç»„ä»¶

ä¼˜åŠ¿:
- åç«¯å’Œå‰ç«¯åŒæ—¶å¼€å‘
- æœ€å¤§åŒ–åˆ©ç”¨ä¸åŒæ¨¡å‹çš„ä¸“é•¿
- æ˜¾è‘—ç¼©çŸ­æ€»æ‰§è¡Œæ—¶é—´
```

### æ€§èƒ½é¢„æœŸ

| åœºæ™¯ | ä¸²è¡Œæ—¶é—´ | å¹¶è¡Œæ—¶é—´ | æé€Ÿæ¯” |
|------|----------|----------|--------|
| 5 ä¸ªæ— ä¾èµ–å­ä»»åŠ¡ | ~15 min | ~5 min | ~3x |
| UI + Backend æ··åˆ | ~10 min | ~6 min | ~1.7x |
| å¤šæ–‡ä»¶å®¡æŸ¥ | ~8 min | ~3 min | ~2.7x |
| é«˜ä¾èµ–ä»»åŠ¡ | ~12 min | ~10 min | ~1.2x |

### å¹¶è¡Œæ—¥å¿—äº‹ä»¶

```json
{"ts":"...","level":"INFO","event":"wave_start","wave":2,"tasks":["subtask_3","subtask_4","subtask_5"]}
{"ts":"...","level":"INFO","event":"parallel_task_start","subtask":"subtask_3","task_id":"bg-001","model":"codex"}
{"ts":"...","level":"INFO","event":"parallel_task_start","subtask":"subtask_4","task_id":"bg-002","model":"codex"}
{"ts":"...","level":"INFO","event":"parallel_task_complete","subtask":"subtask_4","task_id":"bg-002","duration_ms":50000}
{"ts":"...","level":"INFO","event":"wave_complete","wave":2,"duration_ms":90000}
```
